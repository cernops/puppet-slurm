<%# slurmdb.conf.erb                                                         -%>
<%#                                                                          -%>
<%# Parameters for SLURM db node.                                            -%>
<%#                                                                          -%>
<%# version 20170816                                                         -%>
<%#                                                                          -%>
<%# Copyright (c) CERN, 2016-2017                                            -%>
<%# Authors: - Philippe Ganz <phganz@cern.ch>                                -%>
<%#          - Carolina Lindqvist <calindqv@cern.ch>                         -%>
<%#          - Pablo Llopis <pablo.llopis@cern.ch>                           -%>
<%# License: GNU GPL v3 or later.                                            -%>
<%#                                                                          -%>
# /etc/slurm/slurmdb.conf generated by puppet
#
# Configuration file containing parameters for dbnode.
#

# SLURMDBD HOSTS
DbdHost=<%= @dbd_host %>
DbdAddr=<%= @dbd_addr %>
<%= @dbd_backup_host.nil? ? '#DbdBackupHost=' : ('DbdBackupHost=' + @dbd_backup_host) %>
DbdPort=<%= @dbd_port %>


# SECURITY
AuthType=<%= @auth_type %>
<%= @auth_info.nil? ? '#AuthInfo=' : ('AuthInfo=' + @auth_info) %>


# GENERAL OPTIONS
<%= @default_qos.nil? ? '#DefaultQOS=' : ('DefaultQOS=' + @default_qos) %>
MessageTimeout=<%= @message_timeout %>
PidFile=<%= @pid_file %>
PluginDir=<%= @plugin_dir %>
<%= @private_data.nil? ? '#PrivateData=' : ('PrivateData=' + @private_data) %>
SlurmUser=<%= @slurm_user %>
TCPTimeout=<%= @tcp_timeout %>
TrackWCKey=<%= @track_wc_key %>
TrackSlurmctldDown=<%= @track_slurmctld_down %>


# DATABASE
StorageType=<%= @storage_type %>
StorageHost=<%= @storage_host %>
<%= @storage_backup_host.nil? ? '#StorageBackupHost=' : ('StorageBackupHost=' + @storage_backup_host) %>
StoragePort=<%= @storage_port %>
StorageUser=<%= @storage_user %>
StoragePass=<%= @storage_pass %>
StorageLoc=<%= @storage_loc %>


# ARCHIVE
ArchiveDir=<%= @archive_dir %>
<%= @archive_script.nil? ? '#ArchiveScript=' : ('ArchiveScript=' + @archive_script) %>
ArchiveEvents=<%= @archive_events %>
<%= @purge_event_after.nil? ? '#PurgeEventAfter=' : ('PurgeEventAfter=' + @purge_event_after) %>
ArchiveJobs=<%= @archive_jobs %>
<%= @purge_job_after.nil? ? '#PurgeJobAfter=' : ('PurgeJobAfter=' + @purge_job_after) %>
ArchiveResvs=<%= @archive_resvs %>
<%= @purge_resv_after.nil? ? '#PurgeResvAfter=' : ('PurgeResvAfter=' + @purge_resv_after) %>
ArchiveSteps=<%= @archive_steps %>
<%= @purge_step_after.nil? ? '#PurgeStepAfter=' : ('PurgeStepAfter=' + @purge_step_after) %>
ArchiveSuspend=<%= @archive_suspend %>
<%= @purge_suspend_after.nil? ? '#PurgeSuspendAfter=' : ('PurgeSuspendAfter=' + @purge_suspend_after) %>
ArchiveTXN=<%= @archive_txn %>
<%= @purge_txnafter.nil? ? '#PurgeTXNAfter=' : ('PurgeTXNAfter=' + @purge_txnafter) %>
ArchiveUsage=<%= @archive_usage %>
<%= @purge_usage_after.nil? ? '#PurgeUsageAfter=' : ('PurgeUsageAfter=' + @purge_usage_after) %>


# LOGGING
DebugLevel=<%= @debug_level %>
<%# comment out if empty, expand array otherwise                             -%>
<% if @debug_flags.nil? -%>
#DebugFlags=
<% else -%>
DebugFlags=<%= @debug_flags.join(',') %>
<% end -%>
<%#                                                                          -%>
<%= @log_file.nil? ? '#LogFile=' : ('LogFile=' + @log_file) %>
LogTimeFormat=<%= @log_time_format %>
