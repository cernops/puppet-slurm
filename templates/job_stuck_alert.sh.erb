<%# job_stuck_alert.sh.erb                                                   -%>
<%#                                                                          -%>
<%# Shell script warning linux HPC admins if a job gets stuck in CG mode     -%>
<%#                                                                          -%>
<%# version 20170327                                                         -%>
<%#                                                                          -%>
<%# Copyright (c) CERN, 2016-2017                                            -%>
<%# Authors: - Philippe Ganz <phganz@cern.ch>                                -%>
<%#          - Carolina Lindqvist <calindqv@cern.ch>                         -%>
<%# License: GNU GPL v3 or later.                                            -%>
<%#                                                                          -%>
#!/bin/bash
#
# /etc/slurm/job_stuck_alert.sh generated by puppet
#
# Warning linux HPC admins if a job gets stuck in CG mode
#

ps aux | grep mpi && echo "A Slurm job should have stopped, but it is stuck at $HOSTNAME, and cannot be killed. Please investigate." | /usr/bin/mutt -s "Slurm job stuck at $HOSTNAME" -c nils.hoimyr@cern.ch -c philippe.yves.ganz@cern.ch carolina.lindqvist@cern.ch
