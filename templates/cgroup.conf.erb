<%# cgroup.conf.erb                                                          -%>
<%#                                                                          -%>
<%# Cgroup parameters for cgroup related SLURM plugins.                      -%>
<%#                                                                          -%>
<%# version 20170602                                                         -%>
<%#                                                                          -%>
<%# Copyright (c) CERN, 2016-2017                                            -%>
<%# Authors: - Philippe Ganz <phganz@cern.ch>                                -%>
<%#          - Carolina Lindqvist <calindqv@cern.ch>                         -%>
<%#          - Pablo Llopis <pablo.llopis@cern.ch>                           -%>
<%# License: GNU GPL v3 or later.                                            -%>
<%#                                                                          -%>
# /etc/slurm/cgroup.conf generated by puppet
#
# Parameters for plugins using cgroups
#

#################################
# General cgroup options

CgroupAutomount=<%= @cgroup_automount %>
CgroupMountpoint=<%= @cgroup_mountpoint %>


##################################
# TASK/CGROUP plugin configuration

# CPU
ConstrainCores=<%= @constrain_cores %>

# Memory
ConstrainRAMSpace=<%= @constrain_ram_space %>
AllowedRAMSpace=<%= @allowed_ram_space %>
MinRAMSpace=<%= @min_ram_space %>
MaxRAMPercent=<%= @max_ram_percent %>

# Swap
ConstrainSwapSpace=<%= @constrain_swap_space %>
AllowedSwapSpace=<%= @allowed_swap_space %>
MaxSwapPercent=<%= @max_swap_percent %>

# Kernel Memory
ConstrainKmemSpace=<%= @constrain_kmem_space %>
<% unless @allowed_kmem_space.nil? -%>
AllowedKmemSpace=<%= @allowed_kmem_space %>
<% end -%>
MinKmemSpace=<%= @min_kmem_space %>
MaxKmemPercent=<%= @max_kmem_percent %>

# Devices
ConstrainDevices=<%= @constrain_devices %>
AllowedDevicesFile=<%= @allowed_devices_file %>
